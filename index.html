<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุณุชุดุงุฑ ุงูุนุทูุฑ ุงููุญุชุฑู - ุงุฎุชุฑ ุนุทุฑู ุงููุซุงูู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'tajawal': ['Tajawal', 'sans-serif']
                    },
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#F8F9FA',
                        accent: '#FF6B6B',
                        accent2: '#4ECDC4'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
        }
        .question-card {
            transform: translateY(20px);
            opacity: 0;
            animation: slideInUp 0.6s ease-out forwards;
        }
        @keyframes slideInUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .choice-btn {
            transition: all 0.3s ease;
        }
        .choice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(93, 92, 222, 0.2);
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .composition-bar {
            height: 24px;
            border-radius: 12px;
            overflow: hidden;
        }
        .composition-segment {
            height: 100%;
            display: inline-block;
            vertical-align: top;
            position: relative;
        }
        .legend-item {
            display: inline-flex;
            align-items: center;
            margin: 0 10px 5px 0;
        }
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            margin-left: 6px;
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            transform: scale(1.05);
        }
        .perfume-card {
            transition: all 0.3s ease;
        }
        .perfume-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 transition-colors duration-300">
    <!-- Header -->
    <header class="bg-gradient-to-r from-primary to-purple-600 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl font-bold mb-2">๐ธ ูุณุชุดุงุฑ ุงูุนุทูุฑ ุงููุญุชุฑู</h1>
            <p class="text-xl opacity-90">ุงูุชุดู ุนุทุฑู ุงููุซุงูู ูู ุฎูุงู ุฑุญูุฉ ุดุฎุตูุฉ ูููุฒุฉ</p>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="bg-gray-200 dark:bg-gray-700 h-3">
        <div id="progressBar" class="progress-bar bg-gradient-to-r from-primary to-purple-600 h-3" style="width: 0%"></div>
    </div>

    <!-- Main Container -->
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="text-center py-12">
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 mb-8">
                <div class="text-8xl mb-6">๐บ</div>
                <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-4">ูุฑุญุจุงู ุจู ูู ุนุงูู ุงูุนุทูุฑ ุงููููุฒ</h2>
                <p class="text-xl text-gray-600 dark:text-gray-300 mb-8 leading-relaxed max-w-2xl mx-auto">
                    ุณูุณุงุนุฏู ูู ุงุฎุชูุงุฑ ุงูุนุทุฑ ุงููุซุงูู ูุดุฎุตูุชู ููุฒุงุฌู ูู ุฎูุงู ูุฌููุนุฉ ูู ุงูุฃุณุฆูุฉ ุงููุฏุฑูุณุฉุ ุซู ููุฏู ูู ุงูุชุฑุงุญูู ูููุฒูู ูุน ุชูุงุตูู ุงูููููุงุช ูุงููุณุจ
                </p>
                <button onclick="startQuiz()" class="choice-btn bg-gradient-to-r from-primary to-purple-600 text-white px-12 py-4 rounded-full text-xl font-semibold hover:from-purple-600 hover:to-primary shadow-lg">
                    ุงุจุฏุฃ ุงูุฑุญูุฉ โจ
                </button>
            </div>
            
            <div class="mt-12 bg-gradient-to-r from-primary/10 to-purple-600/10 rounded-2xl p-6 max-w-4xl mx-auto">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-4">ูููุฒุงุช ุงูุชุทุจูู</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="text-center p-4">
                        <div class="text-4xl text-primary mb-3"><i class="fas fa-database"></i></div>
                        <h4 class="font-bold text-lg mb-2">ูุงุนุฏุฉ ุนุทูุฑ ุนุงูููุฉ</h4>
                        <p class="text-gray-600 dark:text-gray-300">ุชุญุชูู ุนูู ุฃุดูุฑ ุงูุนุทูุฑ ุงูุนุงูููุฉ ูุน ุชูุงุตูู ุฏูููุฉ</p>
                    </div>
                    <div class="text-center p-4">
                        <div class="text-4xl text-primary mb-3"><i class="fas fa-flask"></i></div>
                        <h4 class="font-bold text-lg mb-2">ุชุญููู ุงูููููุงุช</h4>
                        <p class="text-gray-600 dark:text-gray-300">ุชูุตูู ูุณุจ ุงูููููุงุช ุงูุฃุณุงุณูุฉ ููู ุนุทุฑ ููุชุฑุญ</p>
                    </div>
                    <div class="text-center p-4">
                        <div class="text-4xl text-primary mb-3"><i class="fas fa-heart"></i></div>
                        <h4 class="font-bold text-lg mb-2">ููุงุฑูุฉ ูุฎุตุตุฉ</h4>
                        <p class="text-gray-600 dark:text-gray-300">ุนุฑุถ ุงูุชุฑุงุญูู ูุฎุชูููู ููููุงุฑูุฉ ูุงุฎุชูุงุฑ ุงูุฃูุถู</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="hidden">
            <div class="flex justify-between mb-4">
                <button onclick="previousQuestion()" id="prevBtn" class="nav-button bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-4 py-2 rounded-lg font-medium hidden">
                    <i class="fas fa-chevron-right ml-2"></i> ุงูุณุงุจู
                </button>
                <button onclick="nextQuestion()" id="nextBtn" class="nav-button bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-4 py-2 rounded-lg font-medium hidden">
                    ุงูุชุงูู <i class="fas fa-chevron-left ml-2"></i>
                </button>
            </div>
            
            <div id="questionCard" class="question-card bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 mb-6">
                <div class="text-center mb-8">
                    <span id="questionNumber" class="text-primary font-bold text-lg"></span>
                    <h3 id="questionText" class="text-2xl font-bold text-gray-800 dark:text-white mt-2"></h3>
                    <p id="questionSubtext" class="text-gray-600 dark:text-gray-300 mt-2"></p>
                </div>
                
                <div id="choicesContainer" class="grid gap-4">
                    <!-- Choices will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden">
            <div class="result-card text-white rounded-3xl shadow-2xl p-8 mb-6 text-center">
                <div class="text-6xl mb-4">๐</div>
                <h2 class="text-3xl font-bold mb-4">ุงูุชุดููุง ุนุทุฑู ุงููุซุงูู!</h2>
                <p class="text-xl opacity-90 max-w-3xl mx-auto">ุจูุงุกู ุนูู ุฅุฌุงุจุงุชูุ ุงุฎุชุฑูุง ูู ุฃูุถู ุนุทุฑูู ููุงุณุจุงู ุดุฎุตูุชู ููุฒุงุฌู</p>
            </div>
            
            <div id="perfumesComparison" class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Perfume cards will be inserted here -->
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-6 text-center">ููู ุชููู ูุณุจ ุงูููููุงุชุ</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div class="p-4 bg-primary/10 rounded-lg">
                        <div class="w-8 h-8 mx-auto mb-2 rounded-full bg-primary flex items-center justify-center text-white">
                            <i class="fas fa-tree"></i>
                        </div>
                        <h4 class="font-bold">ุฎุดุจู</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">ุงูุนูุฏุ ุงูุตูุฏูุ ุงูุฃุฑุฒ</p>
                    </div>
                    <div class="p-4 bg-pink-100 dark:bg-pink-900/30 rounded-lg">
                        <div class="w-8 h-8 mx-auto mb-2 rounded-full bg-pink-500 flex items-center justify-center text-white">
                            <i class="fas fa-fan"></i>
                        </div>
                        <h4 class="font-bold">ุฒูุฑู</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">ุงููุฑุฏุ ุงููุงุณูููุ ุงูุฒูุจู</p>
                    </div>
                    <div class="p-4 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg">
                        <div class="w-8 h-8 mx-auto mb-2 rounded-full bg-yellow-500 flex items-center justify-center text-white">
                            <i class="fas fa-lemon"></i>
                        </div>
                        <h4 class="font-bold">ุญูุถู</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">ุงููููููุ ุงูุจุฑุชูุงูุ ุงูุฌุฑูุจ ูุฑูุช</p>
                    </div>
                    <div class="p-4 bg-red-100 dark:bg-red-900/30 rounded-lg">
                        <div class="w-8 h-8 mx-auto mb-2 rounded-full bg-red-500 flex items-center justify-center text-white">
                            <i class="fas fa-pepper-hot"></i>
                        </div>
                        <h4 class="font-bold">ุชูููู</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">ุงููุงููููุงุ ุงููุฑูุฉุ ุงูุนูุจ</p>
                    </div>
                </div>
                
                <div class="text-center mt-10">
                    <button onclick="restartQuiz()" class="nav-button bg-gradient-to-r from-primary to-purple-600 text-white px-8 py-4 rounded-full font-semibold hover:from-purple-600 hover:to-primary">
                        ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ๐
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-100 dark:bg-gray-800 py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-600 dark:text-gray-400">ูุณุชุดุงุฑ ุงูุนุทูุฑ - ุงูุชุดู ุนุทุฑู ุงููุซุงูู ๐ธ</p>
        </div>
    </footer>

    <script>
        // Dark mode handling
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        const questions = [
            {
                id: 1,
                text: "ูุง ููุน ุงูุนุทุฑ ุงูุฐู ุชูุถูุ",
                subtext: "ุงุฎุชุฑ ุงููุฆุฉ ุงูููุงุณุจุฉ ูู",
                choices: [
                    { text: "ุนุทุฑ ูุณุงุฆู ๐ฉ", value: "female", points: { feminine: 3 } },
                    { text: "ุนุทุฑ ุฑุฌุงูู ๐จ", value: "male", points: { masculine: 3 } },
                    { text: "ุนุทุฑ ูุดุชุฑู (ููุงุณุจ ุงูุฌูุณูู)", value: "unisex", points: { neutral: 2 } }
                ]
            },
            {
                id: 2,
                text: "ูุง ุงูููุงุณุจุฉ ุงูุชู ุชุฑูุฏ ุงูุนุทุฑ ูู ุฃุฌููุงุ",
                subtext: "ูู ููุงุณุจุฉ ููุง ุนุทุฑ ูููุฒ",
                choices: [
                    { text: "ููุนูู ูุงูุงุฌุชูุงุนุงุช ุงูุฑุณููุฉ ๐ผ", value: "work", points: { professional: 3, light: 2 } },
                    { text: "ููููุงุณุจุงุช ุงูุฎุงุตุฉ ูุงูุญููุงุช ๐", value: "special", points: { luxury: 3, strong: 2 } },
                    { text: "ููุงุณุชุฎุฏุงู ุงููููู ุงูุนุงุฏู ๐", value: "daily", points: { casual: 3, moderate: 2 } },
                    { text: "ููููุงุนูุฏ ุงูุฑููุงูุณูุฉ ๐", value: "romantic", points: { romantic: 3, sweet: 2 } }
                ]
            },
            {
                id: 3,
                text: "ุฃู ููุน ูู ุงูุฑูุงุฆุญ ุชูุถูุ",
                subtext: "ุงูุฑูุงุฆุญ ุงูุญุงุฑุฉ ุชุนุทู ุฏูุกุ ูุงูุจุงุฑุฏุฉ ุชุนุทู ุงูุชุนุงุด",
                choices: [
                    { text: "ุงูุฑูุงุฆุญ ุงูุญุงุฑุฉ (ุงููุฑูุฉุ ุงููุงููููุงุ ุงูุนูุฏ) ๐ฅ", value: "warm", points: { warm: 3, spicy: 2 } },
                    { text: "ุงูุฑูุงุฆุญ ุงูุจุงุฑุฏุฉ (ุงููุนูุงุนุ ุงููููููุ ุงูุจุญุฑ) โ๏ธ", value: "cool", points: { fresh: 3, citrus: 2 } },
                    { text: "ุงูุฑูุงุฆุญ ุงููุชูุงุฒูุฉ (ุงููุฑุฏุ ุงููุงุณููู) ๐ธ", value: "balanced", points: { floral: 3, balanced: 2 } }
                ]
            },
            {
                id: 4,
                text: "ููู ุชุตู ุญุงูุชู ุงูููุณูุฉ ุงููููุ",
                subtext: "ุงูุนุทุฑ ูุคุซุฑ ุนูู ุงููุฒุงุฌ ููุนูุณ ุงูุดุฎุตูุฉ",
                choices: [
                    { text: "ูุงุฏุฆ ููุณุชุฑุฎู ๐ง", value: "calm", points: { calm: 3, soft: 2 } },
                    { text: "ูุดูุท ููุชุญูุณ โก", value: "energetic", points: { energetic: 3, vibrant: 2 } },
                    { text: "ุฑููุงูุณู ูุญุงูู ๐ญ", value: "dreamy", points: { romantic: 2, dreamy: 3 } },
                    { text: "ูุงุซู ูููู ๐ช", value: "confident", points: { confident: 3, bold: 2 } }
                ]
            },
            {
                id: 5,
                text: "ูุง ููุฉ ุงูุนุทุฑ ุงูุชู ุชูุถููุงุ",
                subtext: "ุจุนุถ ุงูุฃุดุฎุงุต ููุถููู ุงูุนุทูุฑ ุงูุฎูููุฉุ ูุงูุจุนุถ ููุถู ุงููููุฉ",
                choices: [
                    { text: "ุฎููู ูููุนุด ๐ฌ๏ธ", value: "light", points: { light: 3, subtle: 2 } },
                    { text: "ูุชูุณุท ุงูููุฉ โ๏ธ", value: "medium", points: { moderate: 3, balanced: 1 } },
                    { text: "ููู ูุซุงุจุช ๐ฅ", value: "strong", points: { strong: 3, intense: 2 } }
                ]
            },
            {
                id: 6,
                text: "ุฃู ูู ูุฐู ุงูุฃููุงุช ุชูุถู ุงุณุชุฎุฏุงู ุงูุนุทุฑ ูููุ",
                subtext: "ูู ููุช ูู ุนุทุฑ ููุงุณุจ",
                choices: [
                    { text: "ูู ุงูุตุจุงุญ ุงูุจุงูุฑ ๐", value: "morning", points: { fresh: 2, energetic: 1 } },
                    { text: "ูู ูุชุฑุฉ ุงูุธููุฑุฉ โ๏ธ", value: "afternoon", points: { balanced: 2, moderate: 1 } },
                    { text: "ูู ุงููุณุงุก ูุงูููู ๐", value: "evening", points: { warm: 2, romantic: 1, luxury: 1 } }
                ]
            },
            {
                id: 7,
                text: "ูุง ูู ููุฒุงููุชู ููุนุทุฑุ",
                subtext: "ุณูุณุงุนุฏูุง ุฐูู ูู ุงุฎุชูุงุฑ ุงูุนุทุฑ ุงูููุงุณุจ ูุณุนุฑู",
                choices: [
                    { text: "ููุฒุงููุฉ ูุญุฏูุฏุฉ (ุชุญุช 50 ุฏููุงุฑ) ๐ต", value: "low", points: { casual: 2, light: 1 } },
                    { text: "ููุฒุงููุฉ ูุชูุณุทุฉ (50-100 ุฏููุงุฑ) ๐ฐ", value: "medium", points: { balanced: 2, moderate: 2 } },
                    { text: "ููุฒุงููุฉ ุนุงููุฉ (ุฃูุซุฑ ูู 100 ุฏููุงุฑ) ๐", value: "high", points: { luxury: 3, strong: 2 } }
                ]
            },
            {
                id: 8,
                text: "ูุง ูู ุงูููุณู ุงูุฐู ุชูุถู ุงุณุชุฎุฏุงู ุงูุนุทุฑ ูููุ",
                subtext: "ุงูุนุทูุฑ ุชุฎุชูู ูุนุงููุชูุง ุจุงุฎุชูุงู ุงููุตูู",
                choices: [
                    { text: "ุงูุฑุจูุน ๐บ", value: "spring", points: { floral: 3, fresh: 2 } },
                    { text: "ุงูุตูู โ๏ธ", value: "summer", points: { citrus: 3, fresh: 3, light: 2 } },
                    { text: "ุงูุฎุฑูู ๐", value: "autumn", points: { woody: 3, warm: 2 } },
                    { text: "ุงูุดุชุงุก โ๏ธ", value: "winter", points: { spicy: 3, warm: 3, strong: 2 } }
                ]
            }
        ];

        // ูุงุนุฏุฉ ุจูุงูุงุช ุงูุนุทูุฑ ุงูุนุงูููุฉ ุงูููุณุนุฉ
        const perfumes = [
            {
                id: "chanel-bleu",
                name: "ุจูู ุฏู ุดุงููู",
                englishName: "Bleu de Chanel",
                brand: "Chanel",
                category: "ุฑุฌุงูู ูุงุฎุฑ",
                gender: "male",
                description: "ุนุทุฑ ูุฌูุน ุจูู ุงูุญุฏุงุซุฉ ูุงูุฃุตุงูุฉุ ูุณููุฉ ุงูุชุนุจูุฑ ุงููุซุงููุฉ ููุฑุฌู ุงููุงุซู ูู ููุณู. ูุชุฑู ุงูุทุจุงุนุงู ูุง ูููุณู ูู ุฎูุงู ุชูุงุฒูู ุงููููุฒ ุจูู ุงูุญูุถูุงุช ูุงูุฎุดุจ.",
                notes: ["ุงูุฌุฑูุจ ูุฑูุช", "ุงููุนูุงุน", "ุงูุฎุดุจ ุงูุตูุฏู", "ุงูุนูุจุฑ", "ุงููููู", "ุงูุฒูุฌุจูู"],
                occasion: "ุงูุงุฌุชูุงุนุงุช ุงูุฑุณููุฉุ ุงูุนููุ ุงูููุงุณุจุงุช ุงููุณุงุฆูุฉ",
                personality: "ููุฑุฌู ุงููุงุซูุ ุงููููุ ุงูุฃูููุ ุงูุฐู ูุจุญุซ ุนู ุงูุชููุฒ",
                longevity: "8-10 ุณุงุนุงุช",
                sillage: "ููู",
                year: 2010,
                // ููุงุท ุงููุทุงุจูุฉ ูุน ุฎุตุงุฆุต ุงููุณุชุฎุฏู
                points: { masculine: 4, confident: 4, professional: 3, fresh: 3, woody: 4, citrus: 3, strong: 3, modern: 4 },
                // ูุณุจ ุงูููููุงุช ุงูุฃุณุงุณูุฉ
                composition: {
                    citrus: 30,   // ุญูุถูุงุช
                    woody: 40,    // ุฎุดุจู
                    spicy: 15,    // ุชูุงุจู
                    fresh: 10,    // ููุนุด
                    leather: 5    // ุฌูุฏู
                }
            },
            {
                id: "dior-jadore",
                name: "ุฌูุงุฑ ุฏููุฑ",
                englishName: "J'adore by Dior",
                brand: "Dior",
                category: "ุฃูุซู ูุงุฎุฑ",
                gender: "female",
                description: "ุนุทุฑ ุฃูุซู ุณุงุญุฑ ูุฌุณุฏ ุฃูุงูุฉ ุงููุฑุฃุฉ ุงูุนุตุฑูุฉ ูุญููุชูุง. ุชุฑููุจุชู ุงูุฒูุฑูุฉ ุงููุงุฎุฑุฉ ุชุชุฑู ุฃุซุฑุงู ูุง ูููุณู ูุชุนูุณ ุงูุฌูุงู ูุงูุฃูุงูุฉ.",
                notes: ["ุงูููุงูุฌ ููุงูุฌ", "ุงููุฑูุฏ", "ุงูุฌุฐูุงูุฉ", "ุจุฑููู ุงูุดูุณ", "ุฎุดุจ ุงูุฃุจููุณ"],
                occasion: "ุงูููุงุณุจุงุช ุงูุฎุงุตุฉุ ุงูุญููุงุชุ ุงูุฃูุณูุงุช ุงูุฑุงููุฉ",
                personality: "ูููุฑุฃุฉ ุงูุฃูููุฉุ ุงููุงุซูุฉุ ุงููุชุฃููุฉุ ุงูุชู ุชุชูุชุน ุจุงูุฃูุงูุฉ ูุงูุฌูุงู",
                longevity: "6-8 ุณุงุนุงุช",
                sillage: "ูุชูุณุท",
                year: 1999,
                points: { feminine: 5, elegant: 4, romantic: 3, floral: 5, luxury: 4, warm: 2, confident: 3 },
                composition: {
                    floral: 60,   // ุฒูุฑู
                    fruity: 20,   // ููุงูู
                    woody: 15,    // ุฎุดุจู
                    musk: 5       // ูุณู
                }
            },
            {
                id: "creed-aventus",
                name: "ุฃูููุชูุณ",
                englishName: "Creed Aventus",
                brand: "Creed",
                category: "ุฑุฌุงูู ูุงุฎุฑ",
                gender: "male",
                description: "ุฃุณุทูุฑุฉ ูู ุนุงูู ุงูุนุทูุฑุ ู่ฑกๅพ็ ุงูููุฉ ูุงููุฌุงุญ ูุงูุทููุญ. ุนุทุฑ ูุงุฎุฑ ูุฌูุน ุจูู ุงูุฃูุงูุฉ ูุงูููุฉ ุจุจุฑุงุนุฉ.",
                notes: ["ุงูุฃูุงูุงุณ", "ุงูุชูุงุญ ุงูุฃุณูุฏ", "ุงููุนูุงุน ุงูุจุฑู", "ุฎุดุจ ุงูุจุชุดููู", "ุงููุงููููุง", "ุงูุนูุฏ"],
                occasion: "ุงูููุงุณุจุงุช ุงููููุฉุ ุงูุงุฌุชูุงุนุงุช ุงูุนููุงุ ุงูุฃูุณูุงุช ุงูุฑุณููุฉ",
                personality: "ููุฑุฌู ุงูุทููุญุ ุงูููุงุฏูุ ุงููุงุฌุญุ ุงูุฐู ูุจุญุซ ุนู ุงูุชููุฒ ูุงูุชูุฑุฏ",
                longevity: "10+ ุณุงุนุงุช",
                sillage: "ููู ุฌุฏุงู",
                year: 2010,
                points: { masculine: 5, confident: 5, luxury: 5, ambitious: 5, strong: 5, fruity: 3, woody: 3, modern: 4 },
                composition: {
                    fruity: 35,   // ููุงูู
                    woody: 30,    // ุฎุดุจู
                    musky: 15,    // ูุณูู
                    fresh: 10,    // ููุนุด
                    spicy: 10     // ุชูุงุจู
                }
            },
            {
                id: "tom-ford-black-orchid",
                name: "ุฃูุฑููุฏ ุฃุณูุฏ ูู ุชูู ููุฑุฏ",
                englishName: "Tom Ford Black Orchid",
                brand: "Tom Ford",
                category: "ูุดุชุฑู ูุงุฎุฑ",
                gender: "unisex",
                description: "ุนุทุฑ ุบุงูุถ ููุงุฎุฑ ููุบูุงุทูุณูุ ูุฌูุน ุจูู ุซุฑุงุก ุงูุฃุฒูุงุฑ ูุงูุฎุตูุจุฉ ุงูุชุฑุงุจูุฉ ูู ุชุฑููุจุฉ ุณุงุญุฑุฉ ูุบูุฑ ุชูููุฏูุฉ.",
                notes: ["ุงูุฒูุฑุฉ ุงูุณูุฏุงุก", "ุงูุชุฑุงุจ", "ุฎุดุจ ุงูุตูุฏู", "ุงููุงููููุง", "ุงูุดููููุงุชุฉ", "ุขุฏูู"],
                occasion: "ุงูููุงุณุจุงุช ุงููุณุงุฆูุฉุ ุงูุญููุงุช ุงููุบุฑูุฉุ ุงูุฃูุณูุงุช ุงูุฎุงุตุฉ",
                personality: "ููุดุฎุตูุฉ ุงูุบุงูุถุฉุ ุงูุฌุฐุงุจุฉุ ุงููุชูุฑุฏุฉุ ุงูุชู ุชุจุญุซ ุนู ุงูุชูุฑุฏ ูุงูุชููุฒ",
                longevity: "10+ ุณุงุนุงุช",
                sillage: "ุซููู",
                year: 2006,
                points: { unisex: 5, mysterious: 5, bold: 4, romantic: 3, intense: 5, luxurious: 5, woody: 3, spicy: 3 },
                composition: {
                    floral: 25,   // ุฒูุฑู
                    woody: 25,    // ุฎุดุจู
                    spicy: 15,    // ุชูุงุจู
                    oriental: 20, // ุดุฑูู
                    earthy: 15    // ุชุฑุงุจู
                }
            },
            {
                id: "jo-malone-english-pear",
                name: "ููุซุฑู ุงูุฅูุฌููุฒูุฉ ูู ุฌู ูุงููู",
                englishName: "Jo Malone English Pear & Freesia",
                brand: "Jo Malone London",
                category: "ูุดุชุฑู ููุนุด",
                gender: "unisex",
                description: "ุนุทุฑ ููุนุด ูููู ูุฌูุน ุจูู ูุถุงุฑุฉ ุงูููุซุฑู ุงููุงุถุฌุฉ ูุฑูุนุฉ ุงูุฒูุงุจู ุงูุจุฑูุฉุ ูุซุงูู ูุฅุถูุงุก ููุณุฉ ูู ุงูุฃูุงูุฉ ูุงููุฏูุก.",
                notes: ["ุงูููุซุฑู", "ุงูุจุฑููู", "ุงูุฒูู ุงูุจูุถุงุก", "ุงูุฃูุจุฑุง", "ุงูุฎุดุจ ุงูุฃุจูุถ", "ุงููุณู"],
                occasion: "ุงูุงุณุชุฎุฏุงู ุงูููููุ ุงูุนููุ ุงูุตุจุงุญูุงุชุ ุงูุฑุจูุน ูุงูุตูู",
                personality: "ููุดุฎุตูุฉ ุงูุทุจูุนูุฉุ ุงููุงุฏุฆุฉุ ุงูุฃูููุฉุ ุงูุชู ุชูุถู ุงูุจุณุงุทุฉ ูุงูุฃูุงูุฉ",
                longevity: "4-6 ุณุงุนุงุช",
                sillage: "ุฎููู",
                year: 2010,
                points: { unisex: 4, fresh: 5, elegant: 3, casual: 4, light: 5, fruity: 5, floral: 3, clean: 4 },
                composition: {
                    fruity: 40,   // ููุงูู
                    floral: 25,   // ุฒูุฑู
                    woody: 15,    // ุฎุดุจู
                    musky: 10,    // ูุณูู
                    fresh: 10     // ููุนุด
                }
            },
            {
                id: "mugler-angel",
                name: "ุฅููุฌู ูู ููุบูุฑ",
                englishName: "Angel by Mugler",
                brand: "Mugler",
                category: "ูุณุงุฆู ุชูุจูุฒ",
                gender: "female",
                description: "ุฃูู ุนุทุฑ ุญุฏูุซ ูู ูุฆุฉ ุงูุชูุงุจูุณ ุงูุดุฑููุฉ. ุชุญูุฉ ูููุฉ ุชุฌูุน ุจูู ุงูุญูุงูุฉุ ุงูุชูุงุจูุ ูุงูููููุงุช ุงูุฌุฑูุฆุฉ ูู ุงูุณุฌุงู ูุง ูุซูู ูู.",
                notes: ["ุงูุจุฑููู", "ุงููุฑุงููุฉ", "ุงููุงููููุง", "ุงููุงุฑุงููู", "ุดููููุงุชุฉ", "ุจุงุชุดููู", "ุงููุดูุด"],
                occasion: "ุงูููุงุณุจุงุช ุงููุณุงุฆูุฉ ุงูุฑุณููุฉุ ุงูุฎุฑูู ูุงูุดุชุงุก",
                personality: "ูููุฑุฃุฉ ุงูุฌุฑูุฆุฉุ ุงููุชููุฒุฉุ ุงููุบุงูุฑุฉุ ุงูุชู ูุง ุชุฎุดู ุงูุธููุฑ",
                longevity: "10+ ุณุงุนุงุช",
                sillage: "ููู ุฌุฏุงู",
                year: 1992,
                points: { feminine: 5, bold: 5, unique: 5, intense: 4, sweet: 5, spicy: 3, winter: 4, modern: 3 },
                composition: {
                    sweet: 45,    // ุญูู
                    spicy: 20,    // ุชูุงุจู
                    fruity: 15,   // ููุงูู
                    floral: 10,   // ุฒูุฑู
                    earthy: 10    // ุชุฑุงุจู
                }
            },
            {
                id: "le-labo-santal-33",
                name: "ุณุงูุชุงู 33 ูู ูุงุจู",
                englishName: "Le Labo Santal 33",
                brand: "Le Labo",
                category: "ูุดุชุฑู ุนุตุฑู",
                gender: "unisex",
                description: "ุนุทุฑ ุฃููููู ุฃุตุจุญ ููุซู ุฑูุงุญุฉ ูููููุฑู. ุชุฑููุจุฉ ูุฑูุฏุฉ ุชุฌูุน ุจูู ุฏูุก ุงูุฎุดุจ ูุงูุชูุงุจู ูู ุนุทุฑ ุบูุฑ ุชูููุฏู ููููุฒ.",
                notes: ["ุฎุดุจ ุงูุตูุฏู", "ุฃูุฑุงู ุงูุจุฑู้ถ", "ุงููููู", "ุงููููููุช", "ุขุฏูู", "ุงูุนูุจุฑ"],
                occasion: "ุงูุงุณุชุฎุฏุงู ุงูููููุ ุงูุนููุ ุงูุตุญุงูุฉุ ุงููููู",
                personality: "ููุดุฎุตูุฉ ุงูุนุตุฑูุฉุ ุงููุณุชููุฉุ ุงููุซููุฉุ ุงูุชู ุชุจุญุซ ุนู ุงูุชููุฒ ูุงูุฅุจุฏุงุน",
                longevity: "8-10 ุณุงุนุงุช",
                sillage: "ูุชูุณุท",
                year: 2011,
                points: { unisex: 5, modern: 5, woody: 5, sophisticated: 4, confident: 3, urban: 5, unique: 4 },
                composition: {
                    woody: 45,    // ุฎุดุจู
                    spicy: 20,    // ุชูุงุจู
                    leather: 15,  // ุฌูุฏู
                    floral: 10,   // ุฒูุฑู
                    musky: 10     // ูุณูู
                }
            },
            {
                id: "diptyque-tam-dao",
                name: "ุชุงู ุฏุงู ูู ุฏูุจุชู",
                englishName: "Diptyque Tam Dao",
                brand: "Diptyque",
                category: "ูุดุชุฑู ุฎุดุจู",
                gender: "unisex",
                description: "ุนุทุฑ ูุงุฏุฆ ูุฑูุญุงูู ูููู ุจุฃุณุทูุฑุฉ ูุนุงุจุฏ ุงูุดุฑู ุงูุฃูุตู. ุชุฑููุจุฉ ููุนุดุฉ ุชุชูุญูุฑ ุญูู ุฎุดุจ ุงูุตูุฏู ูุน ููุญุงุช ูู ุงููุจุงุชุงุช ุงูุดุฑููุฉ.",
                notes: ["ุฎุดุจ ุงูุตูุฏู", "ุฃูุฑุงู ุงููุจูุงุจ", "ุงููููุง", "ุฎุดุจ ุงูุฃุจูู", "ูุงุฌูุฑ", "ุฃูุฑุงู ุงูุจููุณุฌ", "ุงููุณู"],
                occasion: "ุงูุงุณุชุฎุฏุงู ุงูููููุ ุงูุชุฃููุ ุงูุงุณุชุฑุฎุงุกุ ุงูุฑุจูุน ูุงูุตูู",
                personality: "ููุดุฎุตูุฉ ุงููุงุฏุฆุฉุ ุงูุฑูุญุงููุฉุ ุงููุญุจุฉ ููุทุจูุนุฉุ ุงูุชู ุชุจุญุซ ุนู ุงูุณูุงู ุงูุฏุงุฎูู",
                longevity: "6-8 ุณุงุนุงุช",
                sillage: "ูุชูุณุท",
                year: 2003,
                points: { unisex: 4, woody: 5, calm: 5, spiritual: 4, natural: 5, relaxing: 4, elegant: 3 },
                composition: {
                    woody: 55,    // ุฎุดุจู
                    herbal: 20,   // ุฃุนุดุงุจ
                    floral: 10,   // ุฒูุฑู
                    musky: 10,    // ูุณูู
                    earthy: 5     // ุชุฑุงุจู
                }
            },
            {
                id: "chanel-coco",
                name: "ูููู ูุงุฏููุงุฒูู ูู ุดุงููู",
                englishName: "Coco Mademoiselle",
                brand: "Chanel",
                category: "ูุณุงุฆู ูุงุฎุฑ",
                gender: "female",
                description: "ุนุทุฑ ุญุฑ ูุฃููู ูุฌุณุฏ ุฑูุญ ุฃูุงูุฉ ุงููุฑุฃุฉ ุงูุนุตุฑูุฉ ุงููุณุชููุฉ. ุชุฑููุจุฉ ุชุดุงููู ุงููููุฒุฉ ุชุฌูุน ุจูู ุงูุฃูุงูุฉ ูุงูุญุฏุงุซุฉ.",
                notes: ["ุงูุจุฑุชูุงู", "ุฎูุฎ ุงูุนูุจ", "ุงููุฑุฏ", "ุงููุงุณููู", "ุงูุจูุบููู", "ุจุงุชุดููู", "ุงููุงููููุง", "ุฎุดุจ ุงูุฃุจููุณ"],
                occasion: "ุงูููุงุณุจุงุช ุงูุฑุณููุฉุ ุงูุนููุ ุงููุณุงุก",
                personality: "ูููุฑุฃุฉ ุงููุงุซูุฉุ ุงููุณุชููุฉุ ุงูุญุฏูุซุฉุ ุงูุฃูููุฉ",
                longevity: "8+ ุณุงุนุงุช",
                sillage: "ููู",
                year: 2001,
                points: { feminine: 5, confident: 4, elegant: 4, modern: 4, sophisticated: 3, professional: 3, citrus: 3 },
                composition: {
                    citrus: 20,   // ุญูุถูุงุช
                    floral: 40,   // ุฒูุฑู
                    woody: 25,    // ุฎุดุจู
                    oriental: 10, // ุดุฑูู
                    sweet: 5      // ุญูู
                }
            },
            {
                id: "creed-green-irish-tweed",
                name: "ุงูููุงุด ุงูุฃุฎุถุฑ ุงูุฅูุฑููุฏู",
                englishName: "Creed Green Irish Tweed",
                brand: "Creed",
                category: "ุฑุฌุงูู ููุงุณููู",
                gender: "male",
                description: "ุชุญูุฉ ูููุฉ ููุงุณูููุฉ ุชุฌูุน ุจูู ุทุจูุนุฉ ุฃูุฑููุฏุง ุงูุฎูุงุจุฉ ูุงูุฃูุงูุฉ ุงูุฑุฌุงููุฉ ุงูุฃุตููุฉ. ุนุทุฑ ุชู ุชุตูููู ููุฑุฌู ุงูุฃููู ูุงููููุฒ.",
                notes: ["ุฃูุฑุงู ุงูุดุฌุฑ ูุงูุชุจุบ", "ุฎุดุจ ุงูุตูุฏู", "ุฎุดุจ ุงูุฃุจูู", "ูุฑุงุณููู ุฃุจูุถ", "ุงููุณู", "ุงููุทุฑุงู ุงูุจูุบููู"],
                occasion: "ุงูุงุณุชุฎุฏุงู ุงูููููุ ุงูุนููุ ุงูุตุจุงุญูุงุช",
                personality: "ููุฑุฌู ุงูุฃูููุ ุงูุชูููุฏูุ ุงููุญุจ ููุทุจูุนุฉุ ุงููุงุซู",
                longevity: "8-10 ุณุงุนุงุช",
                sillage: "ูุชูุณุท",
                year: 1985,
                points: { masculine: 5, classic: 5, elegant: 4, natural: 4, sophisticated: 3, confident: 3 },
                composition: {
                    green: 40,    // ุฃุฎุถุฑ
                    woody: 35,    // ุฎุดุจู
                    earthy: 10,   // ุชุฑุงุจู
                    floral: 5,    // ุฒูุฑู
                    musky: 10     // ูุณูู
                }
            }
        ];

        let currentQuestion = 0;
        let userAnswers = {};
        let userPoints = {};
        let userPreferences = {};

        function startQuiz() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('quizContainer').classList.remove('hidden');
            showQuestion(0);
            updateProgress();
            updateNavigationButtons();
        }

        function showQuestion(index) {
            const question = questions[index];
            document.getElementById('questionNumber').textContent = `ุงูุณุคุงู ${index + 1} ูู ${questions.length}`;
            document.getElementById('questionText').textContent = question.text;
            document.getElementById('questionSubtext').textContent = question.subtext;

            const choicesContainer = document.getElementById('choicesContainer');
            choicesContainer.innerHTML = '';

            // Adjust grid based on number of choices
            const numChoices = question.choices.length;
            if (numChoices <= 2) {
                choicesContainer.className = 'grid gap-4 md:grid-cols-2';
            } else if (numChoices <= 4) {
                choicesContainer.className = 'grid gap-4 md:grid-cols-2';
            } else {
                choicesContainer.className = 'grid gap-4';
            }

            question.choices.forEach((choice, choiceIndex) => {
                const button = document.createElement('button');
                button.className = 'choice-btn bg-gray-50 dark:bg-gray-700 hover:bg-primary hover:text-white text-gray-800 dark:text-white p-6 rounded-2xl text-lg font-medium transition-all duration-300 text-right border-2 border-transparent hover:border-primary';
                button.innerHTML = choice.text;
                button.onclick = () => selectChoice(index, choiceIndex);
                choicesContainer.appendChild(button);
            });
        }

        function selectChoice(questionIndex, choiceIndex) {
            const question = questions[questionIndex];
            const choice = question.choices[choiceIndex];
            
            userAnswers[questionIndex] = choice;
            
            // Add points
            for (const [key, value] of Object.entries(choice.points)) {
                userPoints[key] = (userPoints[key] || 0) + value;
            }

            // Save user preferences
            if (question.id === 1) {
                userPreferences.gender = choice.value;
            } else if (question.id === 2) {
                userPreferences.occasion = choice.value;
            } else if (question.id === 5) {
                userPreferences.strength = choice.value;
            } else if (question.id === 7) {
                userPreferences.budget = choice.value;
            } else if (question.id === 8) {
                userPreferences.season = choice.value;
            }

            // Move to next question or show results
            if (questionIndex < questions.length - 1) {
                currentQuestion++;
                setTimeout(() => {
                    showQuestion(currentQuestion);
                    updateProgress();
                    updateNavigationButtons();
                }, 300);
            } else {
                setTimeout(() => {
                    showResults();
                }, 300);
            }
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            if (currentQuestion > 0) {
                prevBtn.classList.remove('hidden');
            } else {
                prevBtn.classList.add('hidden');
            }
            
            if (currentQuestion < questions.length - 1) {
                nextBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.add('hidden');
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
                updateProgress();
                updateNavigationButtons();
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
                updateProgress();
                updateNavigationButtons();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function showResults() {
            document.getElementById('quizContainer').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            // Find best matching perfumes
            const results = calculateBestMatches(userPoints, userPreferences);
            
            // Display results
            const perfumesComparison = document.getElementById('perfumesComparison');
            perfumesComparison.innerHTML = '';
            
            results.forEach((perfume, index) => {
                const perfumeCard = createPerfumeCard(perfume, index);
                perfumesComparison.appendChild(perfumeCard);
            });

            // Reset progress bar
            document.getElementById('progressBar').style.width = '100%';
        }

        function calculateBestMatches(userPoints, preferences) {
            // Filter perfumes based on gender preference
            let filteredPerfumes = perfumes;
            if (preferences.gender && preferences.gender !== 'unisex') {
                filteredPerfumes = perfumes.filter(p => 
                    p.gender === preferences.gender || p.gender === 'unisex'
                );
            }
            
            // Calculate scores for each perfume
            const scoredPerfumes = filteredPerfumes.map(perfume => {
                let score = 0;
                
                // Match points
                for (const [key, value] of Object.entries(perfume.points)) {
                    if (userPoints[key]) {
                        score += Math.min(userPoints[key] * 2, value * 3);
                    }
                }
                
                // Bonus for matching preferences
                if (preferences.strength && perfume.points[preferences.strength]) {
                    score += 5;
                }
                
                if (preferences.occasion && 
                    ((preferences.occasion === 'work' && perfume.points.professional) ||
                     (preferences.occasion === 'special' && perfume.points.luxury) ||
                     (preferences.occasion === 'daily' && perfume.points.casual) ||
                     (preferences.occasion === 'romantic' && perfume.points.romantic))) {
                    score += 5;
                }
                
                // Seasonal bonus
                if (preferences.season) {
                    if (preferences.season === 'spring' && perfume.points.floral) score += 3;
                    if (preferences.season === 'summer' && (perfume.points.citrus || perfume.points.fresh)) score += 3;
                    if (preferences.season === 'autumn' && perfume.points.woody) score += 3;
                    if (preferences.season === 'winter' && (perfume.points.warm || perfume.points.spicy)) score += 3;
                }
                
                return { ...perfume, score };
            });
            
            // Sort by score and take top 2
            return scoredPerfumes
                .sort((a, b) => b.score - a.score)
                .slice(0, 2);
        }

        function createPerfumeCard(perfume, index) {
            const card = document.createElement('div');
            card.className = 'perfume-card bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden';
            
            // Create composition HTML
            const composition = perfume.composition;
            const compositionTotal = Object.values(composition).reduce((sum, val) => sum + val, 0);
            const compositionHtml = createCompositionHtml(composition, compositionTotal);
            const legendHtml = createLegendHtml(composition);
            
            card.innerHTML = `
                <div class="p-8">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="bg-gradient-to-r from-primary to-purple-600 text-white text-xs px-3 py-1 rounded-full font-bold">
                                    ${index === 0 ? 'ุงูุฎูุงุฑ ุงูุฃูู' : 'ุงูุฎูุงุฑ ุงูุซุงูู'}
                                </span>
                            </div>
                            <h3 class="text-3xl font-bold text-gray-800 dark:text-white">${perfume.name}</h3>
                            <p class="text-gray-600 dark:text-gray-400">${perfume.englishName}</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-full w-16 h-16 flex items-center justify-center text-2xl">
                            ${index === 0 ? '1๏ธโฃ' : '2๏ธโฃ'}
                        </div>
                    </div>
                    
                    <p class="text-lg text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">${perfume.description}</p>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-primary/10 rounded-lg p-4">
                            <h4 class="font-bold text-gray-800 dark:text-white mb-1">ุงููุฆุฉ</h4>
                            <p class="text-gray-600 dark:text-gray-300">${perfume.category}</p>
                        </div>
                        <div class="bg-accent/10 rounded-lg p-4">
                            <h4 class="font-bold text-gray-800 dark:text-white mb-1">ุงูููุงุณุจุฉ</h4>
                            <p class="text-gray-600 dark:text-gray-300">${perfume.occasion}</p>
                        </div>
                        <div class="bg-accent2/10 rounded-lg p-4">
                            <h4 class="font-bold text-gray-800 dark:text-white mb-1">ุงูุซุจุงุช</h4>
                            <p class="text-gray-600 dark:text-gray-300">${perfume.longevity}</p>
                        </div>
                        <div class="bg-purple-100 dark:bg-purple-900/30 rounded-lg p-4">
                            <h4 class="font-bold text-gray-800 dark:text-white mb-1">ุงูุงูุชุดุงุฑ</h4>
                            <p class="text-gray-600 dark:text-gray-300">${perfume.sillage}</p>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="font-bold text-xl text-gray-800 dark:text-white mb-3">ุชุฑููุจุฉ ุงูุนุทุฑ</h4>
                        <div class="composition-bar mb-4 bg-gray-200 dark:bg-gray-700">
                            ${compositionHtml}
                        </div>
                        <div class="text-center">
                            ${legendHtml}
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-bold text-xl text-gray-800 dark:text-white mb-3">ุงูููููุงุช ุงูุฃุณุงุณูุฉ</h4>
                        <div class="flex flex-wrap gap-2">
                            ${perfume.notes.map(note => `<span class="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-3 py-1 rounded-full text-sm">${note}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            return card;
        }

        function createCompositionHtml(composition, total) {
            const components = [
                { key: 'citrus', color: '#FBBF24' },
                { key: 'floral', color: '#F9A8D4' },
                { key: 'woody', color: '#84CC16' },
                { key: 'spicy', color: '#EF4444' },
                { key: 'fresh', color: '#22D3EE' },
                { key: 'sweet', color: '#F97316' },
                { key: 'fruity', color: '#A78BFA' },
                { key: 'oriental', color: '#F59E0B' },
                { key: 'earth', color: '#78716C' },
                { key: 'leather', color: '#D97706' },
                { key: 'green', color: '#65A30D' },
                { key: 'herbal', color: '#16A34A' }
            ];
            
            let html = '';
            let currentWidth = 0;
            
            components.forEach(comp => {
                const value = composition[comp.key] || 0;
                if (value > 0) {
                    const width = (value / total) * 100;
                    html += `<span class="composition-segment" style="width: ${width}%; background-color: ${comp.color}"></span>`;
                }
            });
            
            return html;
        }

        function createLegendHtml(composition) {
            const components = {
                citrus: { name: 'ุญูุถู', color: '#FBBF24', icon: '๐' },
                floral: { name: 'ุฒูุฑู', color: '#F9A8D4', icon: '๐บ' },
                woody: { name: 'ุฎุดุจู', color: '#84CC16', icon: '๐ณ' },
                spicy: { name: 'ุชูุงุจู', color: '#EF4444', icon: '๐ถ๏ธ' },
                fresh: { name: 'ููุนุด', color: '#22D3EE', icon: '๐ง' },
                sweet: { name: 'ุญูู', color: '#F97316', icon: '๐ฏ' },
                fruity: { name: 'ููุงูู', color: '#A78BFA', icon: '๐' },
                oriental: { name: 'ุดุฑูู', color: '#F59E0B', icon: '๐' },
                earth: { name: 'ุชุฑุงุจู', color: '#78716C', icon: '๐' },
                leather: { name: 'ุฌูุฏู', color: '#D97706', icon: '๐งณ' },
                green: { name: 'ุฃุฎุถุฑ', color: '#65A30D', icon: '๐ฟ' },
                herbal: { name: 'ุฃุนุดุงุจ', color: '#16A34A', icon: '๐ฟ' }
            };
            
            let html = '';
            let hasNonZero = false;
            
            Object.keys(composition).forEach(key => {
                const value = composition[key];
                if (value > 0 && components[key]) {
                    hasNonZero = true;
                    html += `
                        <div class="legend-item">
                            <span class="legend-color" style="background-color: ${components[key].color}"></span>
                            <span class="text-gray-700 dark:text-gray-300">${components[key].icon} ${components[key].name} (${value}%)</span>
                        </div>
                    `;
                }
            });
            
            return html;
        }

        function restartQuiz() {
            currentQuestion = 0;
            userAnswers = {};
            userPoints = {};
            userPreferences = {};
            
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.remove('hidden');
            document.getElementById('progressBar').style.width = '0%';
        }
    </script>
</body>
</html>
